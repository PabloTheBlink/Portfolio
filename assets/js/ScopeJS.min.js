/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /gh/pablotheblink/ScopeJS@master/js/ScopeJS.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const components={};let ENABLE_DEBUGGER=!1,UUID_ATTRIBUTE="scopejs-component";export function enableDebugger(e){ENABLE_DEBUGGER=e}function log(...e){ENABLE_DEBUGGER&&console.log(...e)}function getChildren(e){if("SLOT"==e.tagName.toUpperCase())return getChildren(e.querySelector("slot"));const t=[];for(let n of e.children)t.push(n.cloneNode(!0));return t}export function Component({tagName:tagName,controller:controller,render:render,postRender:postRender}){const c=new function Component(){this.render=function(container=document.createElement("div"),children=[]){const uuid=container.getAttribute(UUID_ATTRIBUTE)??crypto.randomUUID();function updateDomChildren(e,t){if(e.getAttribute(UUID_ATTRIBUTE)&&e.getAttribute(UUID_ATTRIBUTE)!=uuid)return;const n=e.childNodes,o=t.childNodes,r=Math.max(n.length,o.length);let i=document.querySelector("style[scopejs]");i||(i=document.createElement("style"),i.setAttribute("scopejs","1"),i.innerHTML="::view-transition-old(*), ::view-transition-new(*) { animation-timing-function: ease-in-out; animation-duration: 0.25s; } @keyframes fadeIn { from { opacity: 0; transform: translateY(2.5rem); } to { opacity: 1; transform: translateY(0); } } *[fadeIn] { opacity: 0; transform: translateY(2.5rem); transition: 0.5s; } *[fadeIn='1'] { opacity: 1; transform: translateY(0); }",document.head.appendChild(i));for(let e=0;e<r;e++){const t=o[e];if(!t)continue;if(!t.hasAttribute||!t.hasAttribute("id"))continue;const n=t.getAttribute("id");i.innerHTML.includes(`#${n}`)||(i.innerHTML+=`#${n} { view-transition-name: ${n}; } ::view-transition-group(${n}) { animation-timing-function: cubic-bezier(0.22, 1, 0.36, 1); animation-duration: 0.5s; }`)}for(let t=0;t<r;t++){const r=n[t],i=o[t];if(!r&&i){const t=i.cloneNode(!0);log(uuid,"AÃ±adiendo nuevo elemento",e,t),e.appendChild(t)}else if(r&&!i)r.remove();else if(r&&i)if(r.nodeType===Node.TEXT_NODE&&i.nodeType===Node.TEXT_NODE)r.textContent.replaceAll(/\s/g,"")!==i.textContent.replaceAll(/\s/g,"")&&(log(uuid,"Reemplazando texto",r.textContent,i.textContent),r.textContent=i.textContent);else if(r.tagName===i.tagName){for(let e of r.attributes)e.name!=UUID_ATTRIBUTE&&(i.hasAttribute(e.name)||r.removeAttribute(e.name));for(let e of i.attributes)e.name!=UUID_ATTRIBUTE&&(r.hasAttribute(e.name)?r.getAttribute(e.name)!=e.value&&r.setAttribute(e.name,e.value):r.setAttribute(e.name,e.value));updateDomChildren(r,i)}else{const t=i.cloneNode(!0);log(uuid,"Reemplazando elemento",r,t),e.replaceChild(t,r)}}}const apply=function(){if(!container)return;c._render_times++;const clone=container.cloneNode(!0);clone.innerHTML=render.bind(c)(),updateDomChildren(container,clone),container.querySelectorAll("*[model]").forEach((e=>{const t=e.getAttribute("model").split(".");let n=c;for(let e of t)n&&(n=n[e]);n&&(e.value=n),e.addEventListener("input",(()=>{let n=c;for(let e=0;e<t.length-1;e++)n=n[t[e]];n[t[t.length-1]]=e.value}))}));for(const htmlEvent of["onclick","ondblclick","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onkeydown","onkeypress","onkeyup","onabort","onbeforeunload","onerror","onload","onresize","onscroll","onunload","onblur","onchange","onfocus","onreset","onselect","onsubmit","oncontextmenu","oninput","oninvalid","onsearch","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","oncopy","oncut","onpaste","onwheel","ontouchcancel","ontouchend","ontouchmove","ontouchstart"])container.querySelectorAll(`*[${htmlEvent}]`).forEach((el=>{const clickEventName=el.getAttribute(htmlEvent),function_name=clickEventName.split("(")[0],func=c[function_name];"function"==typeof func&&(el[htmlEvent]=function(event){event.preventDefault();let params={event:event};if(clickEventName.split("(").length>0&&clickEventName.split("(")[1]&&clickEventName.split("(")[1].split(")")[0]){const p=clickEventName.split("(")[1].split(")")[0].split(",");params={};for(let i=0;i<p.length;i++)c[p[i]]?params[i]=c[p[i]]:params[i]=eval(p[i]);params[p.length]=event}setTimeout((()=>func.apply(c,Object.values(params))),0)})}));return container.querySelectorAll("slot").forEach((e=>{for(let t of children)e.appendChild(t)})),container.querySelectorAll("*").forEach((e=>{components[e.tagName.toUpperCase()]&&(e.hasAttribute(UUID_ATTRIBUTE)||c.children.push(components[e.tagName.toUpperCase()].render(e,getChildren(e))))})),postRender&&setTimeout(postRender.bind(c),100),container.dispatchEvent(new Event("change")),container.innerHTML},c=controller?new controller:new function(){};c.children=[],c._render_times=0;for(let e of container.getAttributeNames())c[e]=container.getAttribute(e);return container.setAttribute(UUID_ATTRIBUTE,uuid),c.apply=apply,apply(),container.dispatchEvent(new Event("load")),c}};return tagName&&(components[tagName.toUpperCase()]=c),c}export function Modal({controller:e,render:t,hideWhenClickOverlay:n,className:o,referrer:r},i={},a={}){const s="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 999999999",l="position: fixed; top: 50%; left: 50%; border-radius: 0.25rem; min-width: 20rem; max-width: calc(100% - 2rem); transform: translate(-50%, -50%); background-color: white; color: black; transition: opacity 0.3s, transform 0.3s; z-index: 999999999",c=Component({controller:e,render:t}),d=document.createElement("div");if(d.setAttribute("style",l),r){const e=r.getBoundingClientRect();d.style.top=`${e.top+e.height+1}px`,d.style.left=`${e.left+e.width+1}px`,d.style.transform=""}else d.style.opacity=0,d.style.transform="translate(-50%, 65%)";d.classList.add("modal"),o&&d.classList.add(o);const u=function(...e){a.onClose&&a.onClose(...e),r?(m.remove(),d.remove()):(d.style.opacity=0,d.style.transform="translate(-50%, 65%)",setTimeout((()=>{m.remove(),d.remove()}),300))},p=c.render(d);Object.assign(p,i),p.apply(),p.close=u;const m=document.createElement("div");m.setAttribute("style",s),m.classList.add("overlay"),r&&(m.style.opacity=0),document.body.appendChild(m),document.body.appendChild(d),r||setTimeout((()=>{d.style.opacity=1,d.style.transform="translate(-50%, -50%)"}),50),n&&(m.onclick=u)}export function Router(e=[],t={}){null==t.useHash&&(t.useHash=!0);const n=function(e,t){const n=e.split("/"),o=t.split("/");if(n.length!==o.length)return null;let r={};for(let e=0;e<n.length;e++){const t=n[e],i=o[e];if(t.startsWith(":")){r[t.slice(1)]=i}else if(t!==i)return null}return{params:r}},o=function(e){e.onDestroy&&e.onDestroy();for(let t of e.children)o(t)};return new function(){this.params=void 0,this.alias=void 0,this.path=void 0,this.body=void 0,this.current_component=void 0,this.listeners={},this.navigate=(e,n=null)=>{t.useHash&&(e=`#${e}`),history.pushState({urlPath:`${e}`},"",`${e}`),this.body=n,document.startViewTransition?document.startViewTransition(this.render.bind(this)):this.render()},this.listen=e=>{const t=crypto.randomUUID();this.listeners[t]=e},this.unlisten=e=>{delete this.listeners[e]},this.render=function(r=null){if(r&&(this.container=r),!this.container)return;t.useHash?(location.hash||(location.hash="#/"),this.path=location.hash.replace("#","")):this.path=location.pathname;let i=e.find((e=>e.path===this.path));if(this.params={},!i)for(let t of e){const e=n(t.path,this.path);if(e){this.params=e.params,i=t;break}}i?(this.alias=i.alias.startsWith(":")?this.params[i.alias.split(":")[1]]:i.alias,this.current_component&&o(this.current_component),this.current_component=Component(i.controller).render(this.container)):(this.alias=t.error?t.error.alias.startsWith(":")?this.params[t.error.alias.split(":")[1]]:t.error.alias:"404",this.current_component=Component(t.error?t.error.controller:{render:()=>"404"}).render(this.container));for(let e in this.listeners)this.listeners[e](this.params);setTimeout((()=>{const e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?e.target.setAttribute("fadeIn","1"):e.target.setAttribute("fadeIn","0")}))}));document.querySelectorAll("*[fadeIn]").forEach((t=>{e.observe(t)}))}))},window.addEventListener("popstate",(e=>{this.render()}))}}window.addEventListener("load",(function(){document.querySelectorAll("*[autoload]").forEach((e=>{e.hasAttribute(UUID_ATTRIBUTE)||components[e.tagName.toUpperCase()]&&components[e.tagName.toUpperCase()].render(e,getChildren(e))}))}));
//# sourceMappingURL=/sm/311490c0ab6268cf217c132f19e99b637f8e6e6b344abacb42fc4b06c5265b02.map